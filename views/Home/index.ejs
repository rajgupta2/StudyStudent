<script>
    function checkvalidation() {
        var result = true;
        var Name = $("#Name").val().trim();
        var Email = $("#Email").val().toLowerCase().trim();

        $(".err").remove(); // Remove previous error messages
        $(".err").addClass("text-danger");

        // Validation for Name (2 to 20 characters, alphabets and spaces allowed)
        if (Name.length === 0) {
            $("#Name").after("<span class='err'>Enter your name.</span>");
            result = false;
        } else if (Name.length < 2 || Name.length > 20) {
            $("#Name").after("<span class='err'>Name must be between 2 and 20 characters.</span>");
            result = false;
        } else if (!/^[a-zA-Z\s]+$/.test(Name)) {
            $("#Name").after("<span class='err'>Name should only contain letters and spaces.</span>");
            result = false;
        }

        // Validation for Email using regular expression
        if (Email.length === 0) {
            $("#Email").after("<span class='err'>Enter your email address.</span>");
            result = false;
        } else {
            // Simple and reliable email regex
            var emailPattern = /^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,}$/;
            if (!emailPattern.test(Email)) {
                $("#Email").after("<span class='err'>Enter a valid email address.</span><br/>");
                result = false;
            }
        }
        $(".err").addClass("text-danger");
        return result;
    }

    function onSubmit(token) {
        var res = checkvalidation();
        if (res) {
            var Name = $("#Name").val().trim();
            var Email = $("#Email").val().trim();
            var code = $("#Code").val().trim();
            $.ajax({
                type: "POST",
                url: "/Home/Subscribe",
                data: { SName: Name, SEmail: Email, RecaptchaToken: token, Code: code },
                dataType: "json",
                success: function (obj) {
                    if (obj.Status == "Success")
                        alert("Subscribed Successfully.");
                    else
                        alert(obj.Message);
                }
            });
        }
    }
    $(document).ready(function () {
        $("input,textarea").addClass("form-control mt-3");
        $("#SendCode").click(function () {
            var res = checkvalidation();
            if (res) {
                var Name = $("#Name").val().trim();
                var Email = $("#Email").val().trim();
                $.ajax({
                    type: "POST",
                    url: "/SendCode",
                    data: { SName: Name, SEmail: Email },
                    dataType: "json",
                    success: function (obj) {
                        if (obj.Success) {
                            $("#SendCode").addClass("d-none");
                            $("#Code").attr("type", "text");
                            $(".Subscribe_Btn").removeClass("d-none");
                        } else
                            alert("Due to some error,we are unable to sent code.");
                    }
                });
            }
        });


        $(".learn-more").click(function (e) {
            e.preventDefault();
            $("html, body").animate({
                scrollTop: $("#features").offset().top - 70  // adjust -70 if you have a fixed navbar
            }, 800); // time in ms
        });
    });

</script>
<style>
    .hero {
        background: linear-gradient(to right, #4e54c8, #8f94fb);
        color: white;
        padding: 100px 0;
    }

    .feature-card {
        transition: 0.3s;
    }

    .feature-card:hover {
        transform: translateY(-15px);
        box-shadow: 0 0 15px rgba(0, 0, 0, 0.2);
        background: linear-gradient(to right, #a7aade, #8f94fb);
    }
</style>
<!-- Hero Section -->
<marquee onmouseover="stop()" onmouseout="start()">
    <% if(Notifications){
        Notifications.forEach(function(e){ %>
                    <%=e.Notification_Msg %>
                    <%= e.Notification_DT%>&emsp;&emsp;&emsp;&emsp;
        <% });
    } %>
</marquee>
<section class="hero text-center">
    <div class="container">
        <h1 class="display-4 font-weight-bold">Welcome to StudyStudent</h1>
        <p class="lead mt-3">Your Personalized Digital Study Companion</p>
        <a href="/Home/Registration" class="btn btn-light btn-lg mt-4 mr-2">Get
            Started</a>
        <a href="#features"
            class="learn-more btn btn-outline-light btn-lg mt-4">Learn
            More</a>
    </div>
</section>

<!-- Features Section -->
<section id="features" class="py-4">
    <div class="container">
        <h2 class="text-center mb-5">Key Features</h2>
        <div class="row">
            <% const features=[ { title: "Assignments" ,
                desc: "Submit and manage your assignments." }, {
                title: "Study Materials" ,
                desc: "Access tutorials and notes anytime." }, {
                title: "Results" ,
                desc: "Check academic performance in one place." }, {
                title: "Student Management" ,
                desc: "Admins can manage student records." }, {
                title: "Google Sign-In" ,
                desc: "Login securely using your Google account." }, {
                title: "Feedback & Enquiry" ,
                desc: "Send and view feedback with ease." } ]; %>
                <% features.forEach(f=> { %>
                    <div class="col-md-4 mb-4">
                        <div class="card feature-card h-100 shadow-sm p-5">
                            <div class="card-body">
                                <h5 class="card-title">
                                    <%= f.title %>
                                </h5>
                                <p class="card-text">
                                    <%= f.desc %>
                                </p>
                            </div>
                        </div>
                    </div>
                    <% }) %>
        </div>
    </div>
</section>

<!-- Why Choose Section -->
<section class="py-5  bg-light" style="min-height: 375px;">
    <div class="container text-center my-4">
        <h2 class="mb-5 ">Why Choose StudyStudent?</h2>
        <div class="row">
            <div class="col-md-3">
                <h5>24/7 Access</h5>
                <p>Study anytime, from anywhere.</p>
            </div>
            <div class="col-md-3">
                <h5>Secure</h5>
                <p>Google Sign-in & reCAPTCHA integrated.</p>
            </div>
            <div class="col-md-3">
                <h5>Easy to Use</h5>
                <p>Minimal UI, maximum productivity.</p>
            </div>
            <div class="col-md-3">
                <h5>For Students & Admins</h5>
                <p>Separate dashboards, role-based features.</p>
            </div>
        </div>
    </div>
</section>

<!-- CTA -->
<section class="text-center  py-5 bg-primary text-white" style="min-height: 375px;">
    <div class="my-5 py-5">
        <h2 class="mb-3">Start your academic journey today!</h2>
        <a href="/Home/Registration" class="btn btn-light btn-lg mr-2">Join
            Now</a>
        <a href="/Home/login" class="btn btn-outline-light btn-lg">Admin
            Login</a>
    </div>
</section>
